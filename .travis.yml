language: ruby
rvm:
- 2.3

script:
  - "gem update --system"
  - "gem install bundler"
  - "bundler update --bundler"
  - "npm install"
  - "npm run build"

before_deploy:
  - chmod +x ./deploy.sh

deploy:
  provider: script
  script: "./deploy.sh"
  skip_cleanup: true

env:
  - JEKYLL_ENV=production

os:
  - osx
